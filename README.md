# Юзер-Бот, що автоматизує репортування Телеграм каналів пропагандистів

Цей Телеграм Юзер-Бот використовується для автоматизації репорту пропагандистьских каналів.

Є 3 способи запуску цього бота:
1) через exe файл з [архіву](https://github.com/BeataStultica/telegram_report_bot_ua/releases/download/v1.0.0/report_channels.rar)(тільки для користувачів Windows 10 x64)
2) клонування репозиторію і запуск його локально без використання віртуалізації
3) запуск з використанням Docker.
Нижче про кожен з них детальніше.
## 1) Запуск через exe файл
1. Спочатку потрібно [завантажити архів](https://github.com/BeataStultica/telegram_report_bot_ua/releases/download/v1.0.0/report_channels.rar) та розпакувати його у довільну папку
2. Далі потрібно відкрити цю папку і знайти в ній файл report_channels.exe та запустити його
3. Запущена програма запросить api_id та api_hash, щоб їх отримати переходимо за посиланням  https://my.telegram.org/, вводимо свій номер телефону та код авторизації
<br>Переходимо у вкладку API development tools, пишемо довільний App title та Short name
<br>Нагорі отримуємо App api_id та App api_hash
<br>**ПЕРЕДАВАТИ КОМУСЬ `api_id` та `api_hash` НІ В ЯКОМУ РАЗІ НЕ МОЖНА!!! Вони дають можливіть контролювати вашу персональну сторінку у Телеграмі.**
4. Вводимо отримані api_id та api_hash в програму (для того щоб вставити скопійований текст в програму просто нажимаємо праву кнопку миші)
5. Після цього вводимо телефон вашого аккаунта у форматі +380ххххххххх та код автентифікації який прийде повідомленням у телеграм
6. Якщо все пройшло успішно, то програма виведе повідомлення "Bot started", загальну кількість каналів для скарг та кількість каналів, на які користувач ще не надіслав скарги. Після цього почнуть виводитись назви каналів по мірі надсилання на них скарг.
7. Програму можна вимкнути натиснувши на хрестик, при наступному запуску вона продовжить з каналу, на якому зупинилася в минулий раз.
8. Щоб змінити аккаунт, з якого надсилаються скарги, потрібно видалити файли session_report.session і config.ini, а також видалити всі крім першого рядки файлу reported.csv(можна відкрити через блокнот або Excel), після чого запустити програму і заново виконати пункти 3-5.
## 2. Налаштування системи для використання локально без віртуалізації
1. По-перше, вам необхідно інсталювати Python3. Python можна завантажити за [посиланням](https://www.python.org/downloads/).
2. Також завантажте та встановіть Git, це можна зробити за [посиланням(для Windows)](https://github.com/git-for-windows/git/releases/download/v2.35.1.windows.2/Git-2.35.1.2-64-bit.exe) або [посиланням(для MacOs)](https://git-scm.com/download/mac)
3. Запустіть консоль. Для цього використовуйте комбінацію клавіш Win+R, у з'явившомуся вікні напишіть cmd та натисніть enter
4. Далі виконуємо наступні команди:
```
git clone https://github.com/Antcating/telegram_report_bot_ua
cd telegram_report_bot_ua
pip install -r requirements.txt
```
4. Переходимо за посиланням  https://my.telegram.org/, вводимо свій номер телефону та код авторизації
<br>Переходимо у вкладку API development tools, пишемо любий App title та Short name
<br>Нагорі отримуємо App api_id та App api_hash
<br>**ПЕРЕДАВАТИ КОМУСЬ `api_id` та `api_hash` НІ В ЯКОМУ РАЗІ НЕ МОЖНА!!! Вони дають можливіть контролювати вашу персональну сторінку у Телеграмі.**
5. Запускаємо програму, ввівши в консоль команду ```python3 report_channels.py```
6. По черзі вводимо:
- отриманий раніше api_id
- отриманий раніше api_hash
- Телефон вашого аккаунта у форматі +380ххххххххх
- Код автентифікації який прийде повідомленням у телеграм
7. Якщо все пройшло успішно, то програма виведе в консоль повідомлення "Bot started", загальну кількість каналів для скарг та кількість каналів, на які користувач ще не надіслав скарги. Після цього почнуть виводитись назви каналів по мірі надсилання на них скарг.
8. Щоб вийти з програми натисніть ctrl + C в консолі
9. Деталі використання можна прочитати в розділі Використання
## 3. Скаржитись на канали з використанням Docker
1. Встановіть Docker. [Інструкція по встановленню для Windows](https://docs.docker.com/desktop/windows/install/#install-docker-desktop-on-windows), [для MacOS](https://docs.docker.com/desktop/mac/install/) та [для Linux](https://runnable.com/docker/install-docker-on-linux)
2. Переходимо за посиланням  https://my.telegram.org/, вводимо свій номер телефону та код авторизації
<br>Переходимо у вкладку API development tools, пишемо любий App title та Short name
<br>Нагорі отримуємо App api_id та App api_hash
<br>**ПЕРЕДАВАТИ КОМУСЬ `api_id` та `api_hash` НІ В ЯКОМУ РАЗІ НЕ МОЖНА!!! Вони дають можливіть контролювати вашу персональну сторінку у Телеграмі.**
3. Запускаєте команду:
```
docker run -it sprotyv2/telegram-report-bot-ua:1.1.0
```
4. По черзі вводимо:
- отриманий раніше api_id
- отриманий раніше api_hash
- телефон вашого аккаунта у форматі +380ххххххххх
- код автентифікації який прийде повідомленням у телеграм
5. Бот автоматично напише репорти на канали, що записані у файлі `telegram_db.csv` та у [гугл таблиці](https://docs.google.com/spreadsheets/d/1UXsdKXaSWkkdCYlJJQ3Elv6NgPEmQ-wbVBTvgLV90Ss/edit#gid=0) з текстом, що генеруєтся у файлі `report_message_generator.py`
<br>**Правильно налаштована програма буде відображати такий результат:**
<br><br>![image](https://user-images.githubusercontent.com/39994538/155859028-e83b5228-e711-4f21-bf4e-db9b1cfccb24.png)
6. Щоб "звернути" Docker контейнер для работи на фоні можна використати наступну комбінацію клавіш: Ctrl+P followed by Ctrl+Q. Контейнер продовжить працювати, ви можете переглянути логи за допомогою команди:
```
docker logs /*CONTAINER_ID*/
```
CONTAINER_ID можна знайти виконавши команду для перегляду контейнерів:
```
docker container ls
```
Контейнер можна зупинити за допомогою команди:
```
docker stop /*CONTAINER_ID*/
```
Та знов запустити зупинений контейнер за допомогою команди:
```
docker start /*CONTAINER_ID*/
```
При запуску зупиненого контейнеру він запамʼятає, на які канали вже були надіслані скарги та не бути надсилати повторні скарги на них.

## Використання

### Скражитись на канали:
1. Бот автоматично пише репорти на канали, що записані у файлі `telegram_db.csv` та у [гугл таблиці](https://docs.google.com/spreadsheets/d/1UXsdKXaSWkkdCYlJJQ3Elv6NgPEmQ-wbVBTvgLV90Ss/edit#gid=0) з текстом, що генеруєтся у файлі `report_message_generator.py`
<br>**Правильно налаштована програма буде відображати такий результат:**
<br><br>![image](https://user-images.githubusercontent.com/39994538/155859028-e83b5228-e711-4f21-bf4e-db9b1cfccb24.png)
2. Канали на які було написано репорт записуються в файл reported.csv, тому при наступному запуску програми вона повторно не надсилає репорти на ці канали.
Щоб використати інший аккаунт, треба видалили файли session_new.session та config.ini у папці з програмою(або використати команди `del session_new.session` та `del config.ini`), а також видалити всі крім першого рядки з файлу reported.csv(можна відкрити через блокнот або Excel).

### Лишати коментарі (Лише при локальному запуску бота (пункт 2))

Будьте уважні! Перед там як відсилати повідомлення, приховайте в налаштуваннях приватності
власний телефон, повне справжнє ім'я, таке інше. Якщо ви не певні як то зробить, краще
не використовуйте даний скрипт.

У всіх каналах де ввімкнені коментарі, бот відповідає на останній пост рандомним меседжем з `comments/text_comments.txt`.
Перед тим як запускати бота - додайте свої думки. Щось конструктивне може спрацювати краще, агресія = бан.
Ставте незручні питання, пояснюйте що відбувається насправді.

В ваш основний telegram client (на телефоні та/або десктопі) почнуть надходити відповіді.
Вимкніть нотифікації та не читайте їх (дуже важко психологічно).

Запускаємо бота так само як і попереднього `python spam_channels.py`


## Безпека телеграм-акаунту
Під час налаштування бота вам буде потрібно вказати одноразовий код на сайті my.telegram.org та у python модулі [telethon](https://github.com/LonamiWebs/Telethon). Перше - це офіційний сайт телеграму, друге - це дуже відомий модуль, код якого був перевірений досвідченими програмістами не один раз. Тож ваш акаунт не передається третім особам на протязі всього процесу налаштування та використання програми.
<br>Також програма емулює поведінку нового пристрою який використовує ваш акаунт. Ви можете побачити цей віртуальний пристрій в активних сеансах телеграму (Налаштування -> Приватність і безпека  -> Показати всі сеанси). Він матиме таку ж назву і тип які ви вкажете під час реєстрації на my.telegram.org. *Після виконання програми ви можете видалити цей девайс з активних сеансів.*

## Додаткова інформація
У теці проєкту знаходиться файл `telegram_db.csv`, що містить у собі список пропагандистських каналів. Якщо ви маєте інформацію про інші канали, що не війшли у список, але заслуговують репорту - присилайте їх мені у [телеграм](https://www.t.me/Achating) або додавайте їх у реквестах на Github.
